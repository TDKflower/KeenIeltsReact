import{j as s,h as B,r as i,t as E,f as P,T as K,k as L,g as N,a as c,b as a,a7 as F,a8 as I,C as n,c as g,a9 as j,S as z,d as b}from"./index-e388c6e0.js";import{c as R}from"./index.esm-2f65f2b8.js";import{Y as W}from"./YourRecentTestsCard-c33c287a.js";import{u as Y,T as H}from"./TestTypeSwitch-de7528e4.js";import{E as $}from"./EvaluationLoader-2a21333c.js";import{C as U}from"./CommentsCard-c23cf8ad.js";import{T as o}from"./Tab-a3d8f586.js";import{A as m}from"./Accordion-5bf38b68.js";import{T as q}from"./Table-7d0efeb1.js";import"./ButtonGroup-c1646b01.js";const G=()=>s.jsx($,{title:"Please Wait While We Load Your Book",description:"We are loading your book; it should not take more than a few seconds. If it doesn't load within 1 minute, please refresh to try again."}),ls=()=>{const l=B().book_slug,[t,f]=i.useState(null),[p,y]=i.useState(null),T=E(),k=P(),[d,M]=i.useContext(K);let{registerUser:D,registrationError:J,user:x}=i.useContext(L);const u=Y();i.useEffect(()=>{t&&(document.title=t.name+" | Practice Real IELTS Tests for Free | KeenIELTS")},[t]);function v(){T.get("ieltstest/book/"+l+"/",{params:{testType:d}}).then(e=>{e.status===200?f(e.data):console.log(e)})}function w(){k.post("student/get_attempts_from_book/"+l+"/").then(e=>{e.status===200?y(e.data):console.log(e)})}if(i.useEffect(()=>{d&&(v(),x&&w())},[d]),!t||x&&!p)return s.jsx(G,{});const C=["listening_module","reading_module","writing_module","speaking_module"];return s.jsxs(s.Fragment,{children:[s.jsx("section",{className:"pt-lg-8 pb-lg-16 pt-8 pb-12 bg-primary",children:s.jsxs(N,{children:[s.jsx(c,{className:"align-items-center",children:s.jsx(a,{xl:7,lg:7,md:12,sm:12,children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-white display-4 fw-semi-bold",children:t.name}),s.jsx("p",{className:"text-white mb-4 lead",children:t.description}),s.jsx("div",{className:"d-flex align-items-center"})]})})}),s.jsxs(c,{className:"gy-3 gy-lg-0",children:[s.jsx(a,{xs:12,className:"mb-2  text-md-start",children:s.jsxs("span",{className:"text-white",children:[s.jsx(F,{className:"text-white-50"}),s.jsx("span",{className:"px-2 text-capitalize",children:t.institute.name})]})}),s.jsx(a,{xs:12,className:"mb-2  text-md-start",children:s.jsxs("span",{className:"text-white",children:[s.jsx(R,{className:"text-white-50"}),s.jsx("span",{className:"px-2 text-capitalize",children:t.copyright})]})}),s.jsx(a,{xs:12,className:"mb-2  text-md-start",children:s.jsxs("span",{className:"text-white",children:[s.jsx(I,{className:"text-white-50"}),s.jsx("span",{className:"px-2 text-capitalize",children:t.difficulty})]})})]})]})}),s.jsx("section",{className:"pb-10",children:s.jsx(N,{children:s.jsxs(c,{children:[s.jsx(a,{lg:4,md:12,sm:12,className:"mt-n10 mb-9 mb-lg-0",children:s.jsxs(n,{className:" mb-4",children:[s.jsx("div",{className:"p-1 ",children:s.jsx("img",{src:t.cover,className:"w-100 border-bottom"})}),s.jsx(n.Body,{className:"py-2",children:s.jsx("div",{className:"  ",children:s.jsx(H,{})})}),s.jsx(n.Footer,{children:s.jsx("div",{className:"d-grid ",children:s.jsx(g,{className:"btn btn-primary mb-2",onClick:()=>{u("fulltest",l,"")},children:"Start Full Test"})})})]})}),s.jsx(a,{lg:8,md:12,sm:12,className:"mt-n10 mb-4 mb-lg-0",children:s.jsxs(c,{children:[s.jsx(a,{xs:12,children:s.jsx(o.Container,{defaultActiveKey:"tests",children:s.jsxs(n,{children:[s.jsx(j,{className:"nav-lb-tab",children:["Tests","Your Attempts"].map((e,r)=>s.jsx(j.Item,{children:s.jsx(j.Link,{eventKey:e.toLowerCase(),className:"mb-sm-3 mb-md-0",children:e})},r))}),s.jsx(n.Body,{className:"p-0",children:s.jsxs(o.Content,{children:[s.jsx(o.Pane,{eventKey:"tests",className:"my-2",children:s.jsx(m,{defaultActiveKey:0,flush:!0,children:t.tests.map((e,r)=>s.jsxs(m.Item,{eventKey:r,children:[s.jsx(m.Header,{className:"",children:s.jsx("span",{className:"text-black fw-bold",children:e.name})}),s.jsx(m.Body,{className:"p-0",children:s.jsx(q,{striped:!0,className:"text-nowrap",children:s.jsx("tbody",{children:C.map((h,_)=>e[h].map((S,A)=>s.jsx("tr",{children:s.jsx("td",{children:s.jsxs(z,{direction:"horizontal",gap:1,children:[s.jsx("div",{children:S.name})," ",s.jsx("div",{className:"ms-auto",children:s.jsx(g,{className:"btn-sm ",variant:h.split("_")[0],onClick:()=>{u(h.split("_")[0],l,e.slug)},children:"Start Test"})})]})})},`${_}-${A}`)))})})})]},r))})}),s.jsx(o.Pane,{eventKey:"your attempts",className:"my-2",children:x?s.jsx(W,{tests:p}):s.jsxs("div",{className:"text-center p-4",children:[s.jsx("h3",{children:"Please sign in or create an account to view your test attempts."}),s.jsxs("div",{className:"mt-3",children:[s.jsx(b,{to:"/login/",className:"btn btn-primary ",children:"Sign in"}),s.jsx(b,{to:"/register/",className:"btn btn-outline-primary  ms-2",children:"Create Account"})]})]})})]})})]})})}),s.jsx(a,{xs:12,className:"my-3",children:s.jsx(U,{unique_id:`book-${l}`})})]})})]})})})]})};export{ls as default};
//# sourceMappingURL=BookHomePage-3b399a39.js.map
