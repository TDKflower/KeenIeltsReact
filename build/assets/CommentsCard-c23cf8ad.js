import{r,f as C,a1 as y,a2 as N,j as e,C as a,S as w,aa as _,a4 as g,a as S,b as v,D as x}from"./index-e388c6e0.js";const B=({unique_id:c,title:u="Comments",description:n})=>{const[A,m]=r.useState(null),[l,j]=r.useState(null),d=C(),b=[{type:"textarea",label:"Your Comment",id:"comment",invalid_feedback:"Add your comment here...",placeholder:"Add your comment here...",value:""}],i=y().shape({comment:N().required("Comment is required")});async function h(){try{const s=await d.post(x+"/base/get_comments/"+c+"/");j(s.data.comments)}catch(s){console.error(s),m(s)}}async function p(s,t){try{const o=window.location.href,f={...s,unique_id:c},E=await d.post(x+"/base/add_comment/",f);t(),h()}catch(o){console.error(o),m(o)}}return r.useEffect(()=>{h()},[]),e.jsx(e.Fragment,{children:e.jsxs(a,{children:[e.jsx(a.Header,{children:e.jsxs(w,{direction:"horizontal",gap:3,children:[e.jsx("div",{children:e.jsx("h3",{className:"mt-2 fw-bold",children:u})}),e.jsx("div",{className:"ms-auto",children:e.jsx(_,{size:25,className:"text-black"})})]})}),e.jsxs(a.Body,{className:"border-bottom",children:[n&&e.jsx("p",{children:n}),e.jsx(g,{form_fields:b,form_schema:i,submit_label:"Post Comment",successMessage:"Your comment has been added successfully",validation_schema:i,on_submit:p,resetForm:!0,showSuccessMessage:!1})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:l?l.map((s,t)=>e.jsx(a.Body,{className:"border-bottom",children:e.jsx(S,{className:"d-flex justify-content-between",children:e.jsxs(v,{xs:12,children:[e.jsxs("p",{className:"mb-0",children:[e.jsx("span",{className:"fw-bold",children:s.name})," â€¢"," ",s.short_date]}),e.jsx("p",{className:"mb-0",children:s.comment})]})})},t)):e.jsx(a.Footer,{className:"pt-4 pb-3",children:e.jsx("h4",{className:"text-center",children:"No comments yet!"})})})]})})};export{B as C};
//# sourceMappingURL=CommentsCard-c23cf8ad.js.map
