import{r as t,i as q,g as z,u as Y,A as Q,j as e,c as j,a as i,b as r,h as p,S as U,k as K,C as o}from"./index-64dfe3ff.js";import{L as O}from"./ListeningSection-b79d2241.js";import{C as W}from"./CountdownTimer-eca543e7.js";import{B as $}from"./BookInfo-20f2b86b.js";import{C as G}from"./CustomAudioPlayer-02aa6e30.js";import{g as J,Q as V}from"./QuestionPallete-a8356a74.js";import{M as m}from"./Modal-51e54f81.js";import{A as l}from"./Accordion-775589ec.js";import{T as X}from"./Table-b748b6a9.js";import"./ParseQuestions-fd192a43.js";const Z=()=>{const[h,a]=t.useState();return t.useEffect(()=>{let c=window.pageYOffset;const n=()=>{const d=window.pageYOffset,u=d>c?"down":"up";a(u),c=d};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[]),h},de=()=>{const{module_slug:h,attempt_slug:a}=q(),c=z(),[n,d]=t.useState(null),[u,S]=t.useState(null),T=Z(),b=t.useRef(null),[f,A]=t.useState({}),E=Y(),[_,w]=t.useState(!1),L=()=>w(!0),y=()=>w(!1),[D,N]=t.useState(null),[k,F]=t.useState(!1);t.useEffect(()=>{M()},[d]),t.useEffect(()=>{u!==null&&N(u.audio_start_time)},[u]);async function M(){const s=await c.post(Q.getListeningModule+h+"/");s.status===200&&(d(s.data),S(s.data.sections[0]))}const[C,B]=t.useState({completed_questions:0,total_questions:0});function P(s="In Progress"){const x={answers:f,attempt_type:s};return c.post("/ieltstest/update_attempt/listening/"+a+"/",x)}t.useEffect(()=>{g()},[n]);function g(){return J(b,n,A,B)}const H=s=>{g()};function I(){L()}function v(){g(),P("Completed").then(s=>{s.status===200&&(console.log("Attempt Updated"),E(`/ieltstest/attempt/listening/${h}/${a}/get_result`))}).catch(s=>{console.error("Error updating attempt: ",s)}),y()}const R=s=>{s.preventDefault(),I()};return t.useEffect(()=>{document.title="Listening Test | KeenIELTS"},[]),n?e.jsxs(e.Fragment,{children:[e.jsxs(m,{show:_,onHide:y,centered:!0,children:[e.jsx(m.Header,{closeButton:!0,children:e.jsx(m.Title,{children:"End Test"})}),e.jsx(m.Body,{children:"Are you sure you want to end the test?"}),e.jsxs(m.Footer,{className:"p-2",children:[e.jsx(j,{variant:"outline-primary",onClick:y,children:"No"}),e.jsx(j,{variant:"primary",onClick:v,children:"Yes, end test"})]})]}),e.jsx("form",{onSubmit:R,ref:b,children:k?e.jsxs(e.Fragment,{children:[e.jsxs(i,{className:`${T==="up"?"sticky-top":""} mx-0 border-top border-bottom`,children:[e.jsx(r,{sm:12,className:"p-0 bg-white",children:e.jsx(p,{children:e.jsx(G,{src:n.audio,start_time:D,auto_play:!0})})}),e.jsx(r,{sm:12,className:"bg-white border-top p-0",children:e.jsx(p,{children:e.jsxs(U,{direction:"horizontal",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-black",style:{fontSize:"20px"},children:[" ",e.jsx(K,{})," ",C.completed_questions,"/",C.total_questions]})}),e.jsx("div",{className:"ms-auto",children:e.jsx(W,{initialMinutes:40,initialSeconds:0,handleTimesUp:v,startTimer:k})})]})})})]}),e.jsx(p,{className:"my-3",children:e.jsxs(i,{children:[e.jsx(r,{sm:12,md:8,children:e.jsxs(i,{children:[e.jsx(r,{sm:12,className:"my-3",children:e.jsx(l,{children:e.jsxs(l.Item,{eventKey:"0",children:[e.jsx(l.Header,{children:e.jsx("span",{className:"text-black fw-bold",children:n.test.book.name})}),e.jsx(l.Body,{children:e.jsx($,{module:n,attempt_slug:a})})]})})}),e.jsx(r,{sm:12,children:e.jsx(i,{children:n.sections.length>0&&n.sections.map(s=>e.jsx("div",{className:"my-2",children:e.jsx(O,{section:s,setCurrentSection:S,handleChange:H})},s.id))})})]})}),e.jsx(r,{sm:12,md:4,className:"",children:e.jsxs(i,{className:"sticky-top",style:{zIndex:10},children:[e.jsx(r,{sm:12,className:"my-3",children:e.jsx(l,{children:e.jsxs(l.Item,{eventKey:"0",children:[e.jsx(l.Header,{children:e.jsx("span",{className:"text-black fw-bold",children:"Review Answers"})}),e.jsx(l.Body,{className:"p-0 m-0",children:e.jsxs(X,{striped:!0,bordered:!0,children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",children:"#"}),e.jsx("th",{scope:"col",children:"Your Answer"})]})}),e.jsx("tbody",{children:Object.entries(f).map((s,x)=>e.jsxs("tr",{children:[e.jsx("td",{className:"fw-bold",children:x+1}),e.jsx("td",{className:"text-black",children:s[1]})]},x))})]})})]})})}),e.jsx(r,{sm:12,className:"mt-2",children:e.jsxs(o,{children:[e.jsx(o.Header,{children:e.jsx("span",{className:" fw-bold text-black",children:"Question Pallete"})}),e.jsx(o.Body,{children:e.jsx(V,{module:n,currentFormData:f})}),e.jsx(o.Footer,{children:e.jsx(j,{type:"submit",children:"Submit Answers"})})]})})]})})]})})]}):e.jsx(p,{className:"my-3",children:e.jsx(i,{className:"justify-content-center",children:e.jsx(r,{sm:8,children:e.jsxs(o,{children:[e.jsx(o.Header,{className:"text-black ",children:e.jsx("h3",{className:"m-0 fw-bold",children:"Begin Your Listening Section"})}),e.jsxs(o.Body,{className:"",children:[e.jsx("p",{className:"fw-bold",style:{fontSize:"16px"},children:"Welcome to the Listening Section of your test. Here, your understanding of spoken English will be assessed."}),e.jsx("p",{style:{fontSize:"16px"},children:e.jsxs("ul",{children:[e.jsx("li",{children:"Please ensure your speakers or headphones are properly connected and set to a comfortable volume level."}),e.jsx("li",{children:"When you're ready, press the 'Start Test' button to start the listening test. The audio will play only once, so please listen carefully."}),e.jsx("li",{children:"Remember, take notes if needed and focus on the key details in the conversation or speech."}),e.jsx("li",{children:"Feel free to begin when you're fully prepared. We wish you the best in this part of your language journey!"})]})})]}),e.jsx(o.Footer,{children:e.jsx(j,{onClick:()=>{N(0),F(!0)},children:"Start Test"})})]})})})})})]}):null};export{de as default};
//# sourceMappingURL=AttemptListeningModulePage-ff5b6f74.js.map
