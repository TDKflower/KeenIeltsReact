import{r as o,g,a3 as N,a4 as y,j as e,C as t,S,ac as w,a6 as _,a as v,b as k,D as x}from"./index-64dfe3ff.js";const B=({unique_id:c,title:j="Comments",description:n})=>{const[A,m]=o.useState(null),[l,f]=o.useState(null),d=g(),p=[{type:"textarea",label:"Your Comment",id:"comment",invalid_feedback:"Add your comment here...",placeholder:"Add your comment here...",value:""}],i=N().shape({comment:y().required("Comment is required")});function h(){return localStorage.getItem("authTokens")?JSON.parse(localStorage.getItem("authTokens")):null}async function u(){try{const s=await d.post(x+"/base/get_comments/"+c+"/");f(s.data.comments)}catch(s){console.error(s),m(s)}}async function b(s,a){try{const r=window.location.href,C={...s,unique_id:c},E=await d.post(x+"/base/add_comment/",C);a(),u()}catch(r){console.error(r),m(r)}}return o.useEffect(()=>{h()&&u()},[]),h()?e.jsx(e.Fragment,{children:e.jsxs(t,{children:[e.jsx(t.Header,{children:e.jsxs(S,{direction:"horizontal",gap:3,children:[e.jsx("div",{children:e.jsx("h3",{className:"mt-2 fw-bold",children:j})}),e.jsx("div",{className:"ms-auto",children:e.jsx(w,{size:25,className:"text-black"})})]})}),e.jsxs(t.Body,{className:"border-bottom",children:[n&&e.jsx("p",{children:n}),e.jsx(_,{form_fields:p,form_schema:i,submit_label:"Post Comment",successMessage:"Your comment has been added successfully",validation_schema:i,on_submit:b,resetForm:!0,showSuccessMessage:!1})]}),e.jsx("div",{style:{maxHeight:"300px",overflowY:"auto"},children:l?l.map((s,a)=>e.jsx(t.Body,{className:"border-bottom",children:e.jsx(v,{className:"d-flex justify-content-between",children:e.jsxs(k,{xs:12,children:[e.jsxs("p",{className:"mb-0",children:[e.jsx("span",{className:"fw-bold",children:s.name})," â€¢"," ",s.short_date]}),e.jsx("p",{className:"mb-0",children:s.comment})]})})},a)):e.jsx(t.Footer,{className:"pt-4 pb-3",children:e.jsx("h4",{className:"text-center",children:"No comments yet!"})})})]})}):null};export{B as C};
//# sourceMappingURL=CommentsCard-d0ceca73.js.map
