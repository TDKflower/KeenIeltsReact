{"version":3,"file":"SpeakingResultPage-b8e0c0b4.js","sources":["../../src/pages/ieltstest/speaking/SpeakingResultPage.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\nimport { Link, useParams } from \"react-router-dom\";\nimport useAxios from \"../../../utils/useAxios\";\nimport { API_URLS } from \"../../../utils/config\";\nimport PageHeadingBriefinfo from \"../../../components/layout/PageHeadingBriefInfo\";\nimport {\n  Accordion,\n  Badge,\n  Button,\n  Card,\n  Col,\n  Container,\n  Row,\n  Table,\n} from \"react-bootstrap\";\nimport SectionCard from \"../../../components/ieltstest/SectionCard\";\nimport SkeletonLoader from \"../../../components/elements/skeleton/SkeletonLoader\";\nimport CustomAudioPlayer from \"../../../components/elements/audioplayer/CustomAudioPlayer\";\nimport LoadingContext from \"../../../context/layout/LoadingContext\";\nimport OverallBandsCard from \"../../../components/ieltstest/OverallBandsCard\";\nimport SuggestionListCard from \"../../../components/SuggestionListCard\";\nimport EstimatedBandScoreCard from \"../../../components/EstimatedBandScoreCard\";\nimport { FiPlayCircle } from \"react-icons/fi\";\nimport SpeakingLoader from \"../../../components/ieltstest/speaking/SpeakingLoader\";\nimport FullTestNextModule from \"../../../components/ieltstest/FullTestNextModule\";\nimport StartPracticeTestCard from \"../../../components/ieltstest/StartPracticeTestCard\";\nimport WhatsNextCard from \"../../../components/ieltstest/WhatsNextCard\";\nimport CommentsCard from \"../../../components/CommentsCard\";\nimport SpeakingResponsesCard from \"../../../components/ieltstest/speaking/SpeakingResponsesCard\";\n\nconst module_type = \"speaking\";\n\nconst SpeakingResultPage = () => {\n  const { module_slug, attempt_slug } = useParams();\n  const [attempt, setAttempt] = useState(null);\n  const [module, setModule] = useState(null);\n  const [evaluation, setEvaluation] = useState(null);\n  const [currentAudioTime, setCurrentAudioTime] = useState(0.0);\n  const [deviceType, setDeviceType] = useState(\"desktop\");\n\n  const api = useAxios();\n\n  async function getAttempt() {\n    const response = await api.post(\n      API_URLS.getSpeakingAttempt + attempt_slug + \"/\"\n    );\n    if (response.status === 200) {\n      setAttempt(response.data);\n    } else {\n      console.error(\"Unable to fetch attempt at ListeningResult.jsx\");\n    }\n  }\n\n  async function getModule() {\n    const response = await api.post(\n      API_URLS.getSpeakingModule + module_slug + \"/\"\n    );\n    if (response.status === 200) {\n      setModule(response.data);\n    }\n  }\n\n  async function getEvaluation() {\n    const response = await api.post(\n      \"/ieltstest/get_speaking_evaluation/\" + attempt_slug + \"/\"\n    );\n    if (response.status === 200) {\n      setEvaluation(response.data);\n      getAttempt();\n    } else {\n      console.error(\"Unable to fetch attempt at ListeningResult.jsx\");\n    }\n  }\n\n  useEffect(() => {\n    getAttempt();\n    getModule();\n  }, []);\n\n  useEffect(() => {\n    getEvaluation();\n  }, []);\n\n  useEffect(() => {\n    const handleResize = () => {\n      if (window.innerWidth < 768) {\n        setDeviceType(\"mobile\");\n      } else {\n        setDeviceType(\"desktop\");\n      }\n    };\n\n    handleResize();\n    window.addEventListener(\"resize\", handleResize);\n\n    return () => {\n      window.removeEventListener(\"resize\", handleResize);\n    };\n  }, []);\n\n  useEffect(() => {\n    document.title = \"Speaking Test Result  | KeenIELTS\";\n  }, []);\n\n  if (!module || !attempt || !evaluation) {\n    return <SpeakingLoader />; // Replace with your preferred loading component\n  }\n\n  return (\n    <>\n      <PageHeadingBriefinfo\n        pagetitle={attempt.book.name}\n        briefinfo={\"Speaking Test Result\"}\n        color=\"bg-speaking\"\n      />\n\n      <Container className=\"mb-3\">\n        <Row className=\"justify-content-center\">\n          <Col xl={8} lg={10} md={12} className=\"mt-3\">\n            <OverallBandsCard\n              bands={attempt.bands}\n              description={attempt.bands_description}\n              color=\"speaking\"\n            />\n          </Col>\n\n          <Col xl={8} lg={10} md={12} className=\"mt-3\">\n            <EstimatedBandScoreCard\n              evaluation_keys={evaluation_keys}\n              evaluation={evaluation}\n            />\n          </Col>\n\n          <Col xl={8} lg={10} md={12} className=\"mt-3\">\n            <SuggestionListCard\n              title={\"Test Suggestions\"}\n              array={evaluation.word_choice_suggestions}\n            />\n          </Col>\n          <Col xl={8} lg={10} md={12} className=\"mt-3\">\n            <Card>\n              <Card.Header>\n                <h3 className=\"mt-2 fw-bold\">Conclusion & Expert Feedback</h3>\n              </Card.Header>\n              <Card.Body>\n                <p style={{ fontSize: \"1.1rem\" }}>\n                  {evaluation &&\n                    evaluation[\"overall_personalized_feedback_suggestions\"]}\n                </p>\n              </Card.Body>\n            </Card>\n          </Col>\n          <Col xl={8} lg={10} md={12} className=\"mt-3\">\n            <SpeakingResponsesCard\n              attempt={attempt}\n              currentAudioTime={currentAudioTime}\n              module={module}\n            />\n          </Col>\n\n          {attempt.full_test_next_attempt && (\n            <Col xl={8} lg={10} md={12} className=\"my-3\">\n              <FullTestNextModule attempt={attempt} />\n            </Col>\n          )}\n\n          <Col xl={8} lg={10} md={12} className=\"my-3\">\n            <WhatsNextCard />\n          </Col>\n\n          <Col xl={8} lg={10} md={12} className=\"mb-3\">\n            <StartPracticeTestCard />\n          </Col>\n\n          <Col xl={8} lg={10} md={12} className=\"mb-3\">\n            <CommentsCard unique_id={`${module_type}-${module_slug}`} />\n          </Col>\n        </Row>\n      </Container>\n    </>\n  );\n};\n\nconst evaluation_keys = [\n  {\n    name: \"Fluency and Coherence\",\n    short: \"FC\",\n    key: \"fluency_and_coherence_bands\",\n  },\n  {\n    name: \"Grammatical Range Accuracy\",\n    short: \"GRA\",\n    key: \"grammatical_range_and_accuracy_bands\",\n  },\n  {\n    name: \"Lexical Resource\",\n    short: \"LR\",\n    key: \"lexical_resource_bands\",\n  },\n  {\n    name: \"Pronunciation\",\n    short: \"PR\",\n    key: \"pronunciation_bands\",\n  },\n  // {\n  //   name: null,\n  //   short: \"Overall\",\n  //   key: \"overall_band_score\",\n  // },\n];\n\nexport default SpeakingResultPage;\n"],"names":["module_type","SpeakingResultPage","module_slug","attempt_slug","useParams","attempt","setAttempt","useState","module","setModule","evaluation","setEvaluation","currentAudioTime","setCurrentAudioTime","deviceType","setDeviceType","api","useAxios","getAttempt","response","API_URLS","getModule","getEvaluation","useEffect","handleResize","SpeakingLoader","jsxs","Fragment","jsx","PageHeadingBriefinfo","Container","Row","Col","OverallBandsCard","EstimatedBandScoreCard","evaluation_keys","SuggestionListCard","Card","SpeakingResponsesCard","FullTestNextModule","WhatsNextCard","StartPracticeTestCard","CommentsCard"],"mappings":"6tBA8BA,MAAMA,EAAc,WAEdC,EAAqB,IAAM,CAC/B,KAAM,CAAE,YAAAC,EAAa,aAAAC,CAAa,EAAIC,EAAU,EAC1C,CAACC,EAASC,CAAU,EAAIC,WAAS,IAAI,EACrC,CAACC,EAAQC,CAAS,EAAIF,WAAS,IAAI,EACnC,CAACG,EAAYC,CAAa,EAAIJ,WAAS,IAAI,EAC3C,CAACK,EAAkBC,CAAmB,EAAIN,WAAS,CAAG,EACtD,CAACO,EAAYC,CAAa,EAAIR,WAAS,SAAS,EAEhDS,EAAMC,IAEZ,eAAeC,GAAa,CACpB,MAAAC,EAAW,MAAMH,EAAI,KACzBI,EAAS,mBAAqBjB,EAAe,GAAA,EAE3CgB,EAAS,SAAW,IACtBb,EAAWa,EAAS,IAAI,EAExB,QAAQ,MAAM,gDAAgD,CAElE,CAEA,eAAeE,GAAY,CACnB,MAAAF,EAAW,MAAMH,EAAI,KACzBI,EAAS,kBAAoBlB,EAAc,GAAA,EAEzCiB,EAAS,SAAW,KACtBV,EAAUU,EAAS,IAAI,CAE3B,CAEA,eAAeG,GAAgB,CACvB,MAAAH,EAAW,MAAMH,EAAI,KACzB,sCAAwCb,EAAe,GAAA,EAErDgB,EAAS,SAAW,KACtBR,EAAcQ,EAAS,IAAI,EAChBD,KAEX,QAAQ,MAAM,gDAAgD,CAElE,CAgCA,OA9BAK,EAAAA,UAAU,IAAM,CACHL,IACDG,GACZ,EAAG,CAAE,CAAA,EAELE,EAAAA,UAAU,IAAM,CACAD,GAChB,EAAG,CAAE,CAAA,EAELC,EAAAA,UAAU,IAAM,CACd,MAAMC,EAAe,IAAM,CACrB,OAAO,WAAa,IACtBT,EAAc,QAAQ,EAEtBA,EAAc,SAAS,CACzB,EAGW,OAAAS,IACN,OAAA,iBAAiB,SAAUA,CAAY,EAEvC,IAAM,CACJ,OAAA,oBAAoB,SAAUA,CAAY,CAAA,CAErD,EAAG,CAAE,CAAA,EAELD,EAAAA,UAAU,IAAM,CACd,SAAS,MAAQ,mCACnB,EAAG,CAAE,CAAA,EAED,CAACf,GAAU,CAACH,GAAW,CAACK,QAClBe,EAAe,CAAA,CAAA,EAKrBC,EAAA,KAAAC,WAAA,CAAA,SAAA,CAAAC,EAAA,IAACC,EAAA,CACC,UAAWxB,EAAQ,KAAK,KACxB,UAAW,uBACX,MAAM,aAAA,CACR,QAECyB,EAAU,CAAA,UAAU,OACnB,SAACJ,EAAA,KAAAK,EAAA,CAAI,UAAU,yBACb,SAAA,CAACH,EAAAA,IAAAI,EAAA,CAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAAAJ,EAAA,IAACK,EAAA,CACC,MAAO5B,EAAQ,MACf,YAAaA,EAAQ,kBACrB,MAAM,UAAA,CAAA,EAEV,EAEAuB,EAAAA,IAACI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAAAJ,EAAA,IAACM,EAAA,CACC,gBAAAC,EACA,WAAAzB,CAAA,CAAA,EAEJ,EAEAkB,EAAAA,IAACI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAAAJ,EAAA,IAACQ,EAAA,CACC,MAAO,mBACP,MAAO1B,EAAW,uBAAA,CAAA,EAEtB,EACAkB,EAAA,IAACI,EAAI,CAAA,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAAAN,EAAAA,KAACW,EACC,CAAA,SAAA,CAACT,EAAAA,IAAAS,EAAK,OAAL,CACC,SAAAT,EAAAA,IAAC,MAAG,UAAU,eAAe,wCAA4B,CAC3D,CAAA,EACCA,EAAA,IAAAS,EAAK,KAAL,CACC,eAAC,IAAE,CAAA,MAAO,CAAE,SAAU,QACnB,EAAA,SAAA3B,GACCA,EAAW,yCACf,CAAA,EACF,CAAA,CAAA,CACF,CACF,CAAA,EACAkB,EAAAA,IAACI,GAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAAAJ,EAAA,IAACU,EAAA,CACC,QAAAjC,EACA,iBAAAO,EACA,OAAAJ,CAAA,CAAA,EAEJ,EAECH,EAAQ,wBACNuB,EAAAA,IAAAI,EAAA,CAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAACJ,EAAAA,IAAAW,EAAA,CAAmB,QAAAlC,CAAkB,CAAA,EACxC,EAGDuB,EAAA,IAAAI,EAAA,CAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAACJ,EAAA,IAAAY,EAAA,CAAc,CAAA,EACjB,EAECZ,EAAA,IAAAI,EAAA,CAAI,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAACJ,EAAA,IAAAa,EAAA,CAAsB,CAAA,EACzB,QAECT,EAAI,CAAA,GAAI,EAAG,GAAI,GAAI,GAAI,GAAI,UAAU,OACpC,SAAAJ,MAACc,GAAa,UAAW,GAAG1C,CAAW,IAAIE,CAAW,EAAI,CAAA,EAC5D,CAAA,CAAA,CACF,CACF,CAAA,CACF,CAAA,CAAA,CAEJ,EAEMiC,EAAkB,CACtB,CACE,KAAM,wBACN,MAAO,KACP,IAAK,6BACP,EACA,CACE,KAAM,6BACN,MAAO,MACP,IAAK,sCACP,EACA,CACE,KAAM,mBACN,MAAO,KACP,IAAK,wBACP,EACA,CACE,KAAM,gBACN,MAAO,KACP,IAAK,qBACP,CAMF"}