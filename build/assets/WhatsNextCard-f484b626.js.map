{"version":3,"file":"WhatsNextCard-f484b626.js","sources":["../../src/components/ieltstest/WhatsNextCard.jsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Button, Card, Col, Modal, Row, Stack } from \"react-bootstrap\";\nimport { FiAlertCircle, FiHome, FiPieChart } from \"react-icons/fi\";\nimport { Link } from \"react-router-dom\";\nimport * as Yup from \"yup\";\nimport useAxios from \"../../utils/useAxios\";\nimport BaseForm from \"../layout/BaseForm\";\nimport { DJANGO_BASE_URL } from \"../../utils/config\";\n\nconst WhatsNextCard = () => {\n  const [showReportMistakeModal, setShowReportMistakeModal] = useState(false);\n  const handleCloseReportMistakeModal = () => setShowReportMistakeModal(false);\n  const handleShowReportMistakeModal = () => setShowReportMistakeModal(true);\n  const [error, setError] = useState(null);\n  const api = useAxios();\n\n  const form_fields = [\n    {\n      type: \"select\",\n      label: \"Issue Type\",\n      id: \"issueType\",\n      invalid_feedback: \"What type of issue you're facing?\",\n      placeholder: \"What type of issue you're facing?\",\n      value: \"incorrect-answers\",\n      options: [\n        { value: \"incorrect-answers\", label: \"Incorrect Answers\" },\n        { value: \"incorrect-audio\", label: \"Incorrect Audio\" },\n        { value: \"incorrect-question\", label: \"Incorrect Question\" },\n        { value: \"other\", label: \"Other\" },\n      ],\n    },\n    {\n      type: \"textarea\",\n      label: \"Issue Description\",\n      id: \"issueDescription\",\n      invalid_feedback: \"Describe the issue\",\n      placeholder: \"Describe the issue\",\n      value: \"\",\n    },\n  ];\n\n  const ReportMistakeSchema = Yup.object().shape({\n    issueType: Yup.string().required(\"Issue Type is required\"),\n    issueDescription: Yup.string().required(\"Issue Description is required\"),\n  });\n\n  async function reportMistake(values, handleSuccess) {\n    try {\n      // Fetch the current URL\n      const currentUrl = window.location.href;\n\n      // Add the current URL to your values object\n      const dataToSend = {\n        ...values,\n        currentUrl: currentUrl,\n      };\n\n      // Post request with the updated data\n      const response = await api.post(\n        DJANGO_BASE_URL + \"/base/report_mistake/\",\n        dataToSend\n      );\n\n      handleSuccess();\n\n      setTimeout(() => {\n        handleCloseReportMistakeModal();\n      }, 3000);\n    } catch (error) {\n      console.error(\"Error fetching data:\", error);\n      setError(error.response.data.message);\n    }\n  }\n\n  return (\n    <>\n      <Card>\n        <Card.Header>\n          <h3 className=\"mt-2 fw-bold\">What's Next?</h3>\n        </Card.Header>\n        <Card.Body>\n          <Row>\n            <Col sm={12} lg={4} className=\"mb-2  \">\n              <Button\n                as={Link}\n                to={\"/\"}\n                className=\"btn-lg   w-100 mb-2\"\n                variant=\"outline-primary\"\n              >\n                <Stack direction=\"horizontal\" gap={1}>\n                  <div>Go To Dashboard</div>\n                  <div className=\"ms-auto\">\n                    <FiHome size={25} />\n                  </div>\n                </Stack>\n              </Button>\n            </Col>\n            <Col sm={12} lg={4} className=\"mb-2\">\n              <Button\n                onClick={handleShowReportMistakeModal}\n                className=\"btn-lg  w-100\"\n                variant=\"outline-danger\"\n              >\n                <Stack direction=\"horizontal\" gap={1}>\n                  <div>Report Mistake</div>\n                  <div className=\"ms-auto\">\n                    <FiAlertCircle size={25} />\n                  </div>\n                </Stack>\n              </Button>\n            </Col>\n          </Row>\n        </Card.Body>\n      </Card>\n\n      <Modal\n        show={showReportMistakeModal}\n        onHide={handleCloseReportMistakeModal}\n      >\n        <Modal.Header closeButton>\n          <Modal.Title>Report Mistake</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <BaseForm\n            form_fields={form_fields}\n            submit_label={\"Report Mistake\"}\n            on_submit={reportMistake}\n            serverErrors={error}\n            validation_schema={ReportMistakeSchema}\n            successMessage=\"Mistake Reported Successfully\"\n          />\n        </Modal.Body>\n      </Modal>\n    </>\n  );\n};\n\nexport default WhatsNextCard;\n"],"names":["WhatsNextCard","showReportMistakeModal","setShowReportMistakeModal","useState","handleCloseReportMistakeModal","handleShowReportMistakeModal","error","setError","api","useAxios","form_fields","ReportMistakeSchema","Yup.object","Yup.string","reportMistake","values","handleSuccess","currentUrl","dataToSend","response","DJANGO_BASE_URL","jsxs","Fragment","Card","jsx","Row","Col","Button","Link","Stack","FiHome","FiAlertCircle","Modal","BaseForm"],"mappings":"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"}